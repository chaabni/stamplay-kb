angular.module("app").factory("AccountService",["$q","$stamplay",function($q,$stamplay){var user=$stamplay.User().Model;return{login:function(){var q=$q.defer();return user.login("facebook").then(function(){q.resolve(user.instance)}),q.promise},logout:function(){var q=$q.defer();return user.logout("facebook"),q.promise},currentUser:function(){var q=$q.defer();return user.currentUser().then(function(){q.resolve(user)}),q.promise}}}]),angular.module("app").factory("HomeService",[function(){return{test:"Hello!"}}]),angular.module("app").factory("QuestionService",["$q","$stamplay","algolia",function($q,$stamplay,algolia){var client=algolia.Client("7TMV8F22UN","b5e5aa05c764aa1718bc96b793078703"),index=client.initIndex("KBQUESTIONS");return{newQuestion:function(details){var question=$stamplay.Cobject("question").Model,q=$q.defer();return question.set("title",details.title),question.set("body",details.body),question.save().then(function(){q.resolve(question.instance)}),q.promise},getQuestions:function(){var questionCollection=$stamplay.Cobject("question").Collection,q=$q.defer();return questionCollection.populateOwner().fetch().then(function(){q.resolve(questionCollection)}),q.promise},searchQuestions:function(query){var q=$q.defer();return index.search(query).then(function(content){q.resolve(content)},function(err){q.reject()}),q.promise},getQuestionDetails:function(id){var question=$stamplay.Cobject("question").Model,user=$stamplay.User().Model,q=$q.defer();return question.fetch(id).then(function(){user.fetch(question.instance.owner).then(function(){question.instance.owner=user.instance,q.resolve(question)})}),q.promise},addSolution:function(solution,id){var question=$stamplay.Cobject("question").Model,q=$q.defer();return question.fetch(id).then(function(){question.set("solution",solution),question.save().then(function(){console.log(question.instance),q.resolve(question)},function(err){console.log(err)})}),q.promise}}}]);